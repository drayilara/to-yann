!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.contentScript=t():e.contentScript=t()}(self,(()=>(({851:function(){var e=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function s(e){try{a(n.next(e))}catch(e){r(e)}}function c(e){try{a(n.throw(e))}catch(e){r(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,c)}a((n=n.apply(e,t||[])).next())}))};chrome.runtime.onMessage.addListener((function(e,t,o){if(console.log("Received request from popup.js: ",e),"fetchAuthToken"===e.message){const{cookieName:t,url:n}=e;console.log("Fetching cookie: ",t,n),chrome.cookies.get({name:t,url:n},(function(e){console.log("cookie: ",e),o({cookie:e})}))}return!0})),chrome.runtime.onMessage.addListener((function(e,t,o){if("linkedinTheme"===e.message){const e="li_theme",t="https://www.linkedin.com";chrome.cookies.get({name:e,url:t},(function(e){return console.log("cookie: ",e),o({cookie:e}),!0}))}}));const t=["li_at","JSESSIONID","liap","li_a"],o=e=>{const o={};let n=0;t.forEach((i=>{chrome.cookies.get({url:"https://www.linkedin.com",name:i},(function(i){if(i&&(o[i.name]=i.value),n++,n===t.length){const t=chrome.runtime.getManifest().version;Object.keys(o).length>0?e({data:o,ver:t}):e({data:"No cookies found"})}}))}))},n=()=>{const e=document.querySelector(".ember-view .pv-text-details__about-this-profile-entrypoint"),t=document.querySelector(".evi-image.ember-view.profile-photo-edit__preview");let o;return document.querySelectorAll("code").forEach((e=>{var t;try{const n=JSON.parse(e.innerHTML);"object"==typeof n&&1===(null===(t=null==n?void 0:n.included)||void 0===t?void 0:t.length)&&2===Object.keys(n).length&&(o=n)}catch(e){console.log(e)}})),{profileUrl:e?`https://www.linkedin.com${e.getAttribute("href")}`:"Not Found",imageSrc:t?t.getAttribute("src"):"Not Found",userData:o||"Not Found",company:function(){const e={};return document.querySelectorAll(".artdeco-card.pv-profile-card.break-words.mt2").forEach((function(t){if(t.querySelector("#experience")){const o=t.querySelector(".artdeco-list__item .display-flex .t-bold span");e.jobTitle=o?o.textContent.trim():"Title not found";const n=t.querySelector('.artdeco-list__item a[data-field="experience_company_logo"]');e.url=n?n.href.trim():"URL not found"}})),e}()}},i=()=>{var e;let t;return document.querySelectorAll("code").forEach((e=>{var o;try{const n=JSON.parse(e.innerHTML);"object"==typeof n&&1===(null===(o=null==n?void 0:n.included)||void 0===o?void 0:o.length)&&2===Object.keys(n).length&&(t=n)}catch(e){console.log(e)}})),{premiumSubscriber:null===(e=null==t?void 0:t.data)||void 0===e?void 0:e.premiumSubscriber,userData:t||"no data found"}},r=()=>{const e={};return t.forEach((t=>{chrome.cookies.get({url:"https://www.linkedin.com",name:t},(function(t){t&&(e[t.name]=t.value)}))})),e},s=(t,o)=>{chrome.tabs.create({url:"https://www.linkedin.com/in/",active:!0},(s=>{chrome.scripting.executeScript({target:{tabId:s.id},func:i},(i=>e(this,void 0,void 0,(function*(){let e=i[0].result.premiumSubscriber,c=i[0].result.userData,a=r();e&&o&&chrome.tabs.create({url:"https://www.linkedin.com/sales/index",active:!0},(e=>{setTimeout((()=>{a=r(),chrome.tabs.remove(e.id)}),5e3)})),setTimeout((()=>{chrome.scripting.executeScript({target:{tabId:s.id},func:n},(o=>{if(o&&o.length>0&&o[0].result){const n=chrome.runtime.getManifest().version;t({data:{profile:o[0].result,cookie:a,isPremiumUser:e,userData:c,ver:n}})}else t({error:"Failed to retrieve profile information"});chrome.tabs.remove(s.id)}))}),6e3)}))))}))},c=()=>{var e;const t=document.querySelector(".text-heading-xlarge.inline.t-24.v-align-middle.break-words"),o=document.querySelector(".pv-top-card-profile-picture__image.pv-top-card-profile-picture__image--show"),n=document.querySelectorAll("[data-generated-suggestion-target]");return{imgUrl:null==o?void 0:o.getAttribute("src"),name:null==t?void 0:t.textContent,headline:null===(e=n[0])||void 0===e?void 0:e.textContent}};chrome.runtime.onMessage.addListener(((t,n,i)=>e(this,void 0,void 0,(function*(){if("getCookies"===t.message)return console.log("Received event"),o(i),!0;if("openSalesNavigator"===t.message)return chrome.tabs.create({url:"https://www.linkedin.com/sales/index"},(e=>{setTimeout((()=>{chrome.tabs.remove(e.id),o(i)}),6e3)})),!0;if("getProfileInfo"===t.message)return s(i,!1),!0;if("getProfileInfoWithSaleNavigator"===t.message)return s(i,!0),!0;if("getExtensionInfo"===t.message)return(e=>{e({data:!0,ver:chrome.runtime.getManifest().version})})(i),!0;if("fetchWorkspaces"===t.message){const{email:o}=t,n="https://prosp.ai/api/extension/get-workspaces",r=yield function(t,o){return e(this,void 0,void 0,(function*(){return new Promise(((e,n)=>{fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o})}).then((e=>e.json())).then((t=>{e(t)})).catch((e=>{n(e)}))}))}))}(n,o);return console.log("workspaces: ",JSON.stringify(r)),i({response:r}),!0}if("export"===t.message){const o="https://prosp.ai/api/save-search-url",{user_id:n,workspace_id:r,search_url:s,list:c}=t,a=yield function(t,o){return e(this,void 0,void 0,(function*(){return new Promise(((e,n)=>{fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then((e=>e.json())).then((t=>{e(t)})).catch((e=>{n(e)}))}))}))}(o,{user_id:n,workspace_id:r,search_url:s,list:c});return i({response:a}),!0}if("addProfile"===t.message){const e="https://prosp.ai/api/extension/save-profile-from-linkedin-ui",{profiles_urls:o,workspace_id:n,cookie:r,list_id:s}=t,c=yield l(e,{profiles_urls:o,workspace_id:n,cookie:r,list_id:s});return i({response:c}),!0}if("getCookieDb"===t.message){const e="https://prosp.ai/api/extension/get-cookie",{userId:o}=t,n=yield d(e,o);return i({response:n}),!0}if("getIcon"===t.message){const{icon:e}=t;if("plus-icon"===e){const e=chrome.runtime.getURL("img/plus-icon.svg");return console.log({plusIconUrl:e}),i({icon:e}),!0}}else if("openTab"===t.message){const{url:e}=t;chrome.tabs.create({url:e})}else if("linkedinTheme"===t.message){const e="li_theme",t="https://www.linkedin.com";chrome.cookies.get({name:e,url:t},(function(e){return console.log("Linkedin theme: ",e),i({cookie:e}),!0}))}else{if("fetchList"===t.message){const{workspace:o}=t,n=yield function(t){return e(this,void 0,void 0,(function*(){return new Promise(((e,o)=>{fetch("https://prosp.ai/api/extension/get-workspace-lists",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({workspace:t})}).then((e=>e.json())).then((t=>{e(t)})).catch((e=>{o(e)}))}))}))}(o);return i({lists:n}),!0}if("createListAndSaveProfile"===t.message){const{workspace:e,profile:o,cookie:n,list:r}=t,s="https://prosp.ai/api/extension/save-list-to-workspace",c="https://prosp.ai/api/extension/save-profile-from-linkedin-ui";return console.log({workspace:e,profile:o,cookie:n,list:r}),yield u(s,r,e),yield l(c,{profiles_urls:o,workspace_id:e.id,cookie:n,list_id:r.id}),i({message:"success"}),!0}if("saveList"===t.message){const e="https://prosp.ai/api/extension/save-list-to-workspace",{workspace:o,list:n}=t;return yield u(e,n,o),i({message:"success"}),!0}if("getLinkedinUrl"===t.message){const o="https://prosp.ai/api/extension/get-linkedin-url",{userId:n}=t,r=yield function(t,o){return e(this,void 0,void 0,(function*(){try{const e=yield fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:o})});if(!e.ok)throw Error("Error saving list");return console.log("Response from fetching linkedin url:",e),yield e.json()}catch(e){throw console.error("Error saving list:",e.message),e}}))}(o,n);return i({data:r}),!0}if("fetchProfileInfo"===t.message){const t=yield function(){return e(this,void 0,void 0,(function*(){let[e]=yield chrome.tabs.query({active:!0});return e}))}();return console.log("tab url: ",t.url),chrome.scripting.executeScript({target:{tabId:t.id},func:c},(e=>{i({data:e[0].result})})),!0}if("enrich"===t.message){const e="https://prosp.ai/api/enrich-profile",{payload:{urls:o,workspace_id:n}}=t,r=yield a(e,o,n);return i(r),!0}if("scrapeProfile"===t.message){const{cookie:o,profileUrl:n}=t,r="https://prosp.ai/api/scrapProfiles",s=yield function(t,o,n){return e(this,void 0,void 0,(function*(){return new Promise(((e,i)=>{fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cookie:o,profiles_urls:[n]})}).then((e=>e.json())).then((t=>{e(t)})).catch((e=>{i(e)}))}))}))}(r,o,n);return i(s),!0}if("generateAiMessage"===t.message){const o="https://prosp.ai/api/extension/generate-ai-message",{workspaceId:n,userId:r,profile:s}=t.payload,c=yield function(t,o,n,i){return e(this,void 0,void 0,(function*(){return new Promise(((e,r)=>{fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({workspaceId:o,userId:n,profile:i})}).then((e=>e.json())).then((t=>{e(t)})).catch((e=>{r(e)}))}))}))}(o,n,r,s);return i(c),!0}if("sendMessage"===t.message){const o="https://prosp.ai/api/extension/send-message",n=t.payload,r=yield function(t,o){return e(this,void 0,void 0,(function*(){return new Promise(((e,n)=>{fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then((e=>e.json())).then((t=>{e(t)})).catch((e=>{n(e)}))}))}))}(o,n);return i(r),!0}if("addEnricmentInfo"===t.message){const{email:o,phone:n,linkedin:r,workspace:s}=t.data,c="https://prosp.ai/api/extension/update-enrichment-info",a=yield function(t,o){return e(this,void 0,void 0,(function*(){return new Promise((e=>{fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then((e=>e.json())).then((t=>{e(t)})).catch((t=>{e(t)}))}))}))}(c,{email:o,phone:n,linkedin:r,workspace:s});return i(a),!0}}}))));const a=(t,o,n)=>e(this,void 0,void 0,(function*(){return new Promise((e=>{fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({urls:o,workspace_id:n})}).then((e=>e.json())).then((t=>{e(t)})).catch((t=>{console.log(t),e(null)}))}))}));function l(t,o){return e(this,void 0,void 0,(function*(){return new Promise(((e,n)=>{fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then((e=>e.json())).then((t=>{e(t)})).catch((e=>{n(e)}))}))}))}const d=(t,o)=>e(this,void 0,void 0,(function*(){try{const e=yield fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:o})});if(!e.ok)return null;const n=yield e.json();return console.log("Cookie Object:",n),n}catch(e){return console.error("Error fetching cookie:",e.message),null}}));function u(t,o,n){return e(this,void 0,void 0,(function*(){try{const e=yield fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({list:o,workspace:n})});if(!e.ok)throw Error("Error saving list");const i=yield e.json();console.log("Response from saving list:",i)}catch(e){throw console.error("Error saving list:",e.message),e}}))}}}[851](),{}))));